<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Image Manager - EuroVolt Admin</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        body {
            background: #f8f9fa;
            padding: 20px;
        }
        .admin-header {
            background: linear-gradient(135deg, #0a0a0a, #1a1a1a);
            color: white;
            padding: 2rem;
            border-radius: 10px;
            margin-bottom: 2rem;
        }
        .product-card {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .image-preview {
            max-width: 150px;
            max-height: 150px;
            object-fit: contain;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 5px;
            margin: 5px;
        }
        .code-block {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 1rem;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            overflow-x: auto;
            margin-top: 1rem;
        }
        .category-header {
            background: #4CAF50;
            color: white;
            padding: 1rem;
            border-radius: 8px;
            margin-top: 2rem;
            margin-bottom: 1rem;
        }
        .instruction-box {
            background: #e3f2fd;
            border-left: 4px solid #2196F3;
            padding: 1rem;
            border-radius: 5px;
            margin-bottom: 1rem;
        }
        .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
        }
        .code-container {
            position: relative;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <!-- Admin Header -->
        <div class="admin-header">
            <h1><i class="fas fa-images me-3"></i>Product Image & Gallery Manager</h1>
            <p class="mb-0">Manage product images, galleries, videos, and downloadable documents</p>
        </div>

        <!-- Instructions -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header bg-primary text-white">
                        <h4 class="mb-0"><i class="fas fa-info-circle me-2"></i>How to Update Product Images</h4>
                    </div>
                    <div class="card-body">
                        <h5>Step-by-Step Guide:</h5>
                        <ol>
                            <li><strong>Upload Images:</strong> Place your product images in <code>static/images/</code> folder</li>
                            <li><strong>Edit Data File:</strong> Open <code>static/js/data.js</code> in a text editor</li>
                            <li><strong>Update Product:</strong> Find the product you want to update (see examples below)</li>
                            <li><strong>Add/Update Fields:</strong>
                                <ul>
                                    <li><code>images</code>: Array of image paths for gallery</li>
                                    <li><code>video</code>: YouTube embed URL for product video</li>
                                    <li><code>catalog</code>: Path to product catalog PDF</li>
                                    <li><code>datasheet</code>: Path to technical datasheet PDF</li>
                                </ul>
                            </li>
                            <li><strong>Save & Deploy:</strong> Save the file and deploy using Wrangler</li>
                        </ol>

                        <div class="instruction-box mt-3">
                            <strong><i class="fas fa-lightbulb me-2"></i>Pro Tip:</strong>
                            Use the code examples below for each product. Simply copy, paste, and modify the paths to match your uploaded images!
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Product List -->
        <div id="productsList"></div>

        <!-- Upload Guide -->
        <div class="row mt-5">
            <div class="col-12">
                <div class="card">
                    <div class="card-header bg-success text-white">
                        <h4 class="mb-0"><i class="fas fa-upload me-2"></i>Image Upload Guide</h4>
                    </div>
                    <div class="card-body">
                        <h5>Where to Place Files:</h5>
                        <ul>
                            <li><strong>Product Images:</strong> <code>static/images/products/</code></li>
                            <li><strong>Product PDFs:</strong> <code>static/downloads/</code></li>
                        </ul>

                        <h5 class="mt-4">Recommended Image Specifications:</h5>
                        <ul>
                            <li><strong>Format:</strong> JPG, PNG, or WebP</li>
                            <li><strong>Size:</strong> 1280x720 pixels (landscape) or 800x800 pixels (square)</li>
                            <li><strong>File Size:</strong> Under 500KB for fast loading</li>
                            <li><strong>Naming:</strong> Use descriptive names (e.g., <code>mega-6kw-front.jpg</code>, <code>mega-6kw-detail.jpg</code>)</li>
                        </ul>

                        <h5 class="mt-4">YouTube Video Embed URL:</h5>
                        <p>To get the embed URL from a YouTube video:</p>
                        <ol>
                            <li>Go to the YouTube video</li>
                            <li>Click "Share" button</li>
                            <li>Click "Embed"</li>
                            <li>Copy the URL from <code>src="..."</code> (should look like: <code>https://www.youtube.com/embed/VIDEO_ID</code>)</li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Product Data -->
    <script src="static/js/data.js"></script>

    <script>
        // Generate product list with code examples
        function generateProductList() {
            const container = document.getElementById('productsList');
            let html = '';

            const categories = {
                'hybrid_inverters': 'Hybrid Inverters',
                'ongrid_inverters': 'On-Grid Inverters',
                'offgrid_inverters': 'Off-Grid Inverters',
                'mppt_controllers': 'MPPT Charge Controllers',
                'pwm_controllers': 'PWM Charge Controllers'
            };

            for (const [categoryKey, categoryName] of Object.entries(categories)) {
                if (!productData[categoryKey]) continue;

                html += `<div class="category-header">
                    <h3><i class="fas fa-folder-open me-2"></i>${categoryName}</h3>
                </div>`;

                productData[categoryKey].forEach((product, index) => {
                    html += generateProductCard(product, categoryKey, index);
                });
            }

            container.innerHTML = html;
        }

        function generateProductCard(product, category, index) {
            const hasImages = product.images && product.images.length > 0;
            const hasVideo = product.video;
            const hasCatalog = product.catalog;
            const hasDatasheet = product.datasheet;
            const hasDetailedSpecs = product.detailedSpecs;

            let card = `
                <div class="product-card">
                    <div class="row">
                        <div class="col-md-4">
                            <h4>${product.name}</h4>
                            ${product.power ? `<p><strong>Power:</strong> ${product.power}</p>` : ''}
                            ${product.current ? `<p><strong>Current:</strong> ${product.current}</p>` : ''}
                            ${product.voltage ? `<p><strong>Voltage:</strong> ${product.voltage}</p>` : ''}

                            <div class="mt-3">
                                <span class="badge ${hasImages ? 'bg-success' : 'bg-secondary'}">
                                    <i class="fas fa-images me-1"></i>Gallery: ${hasImages ? product.images.length + ' images' : 'Not set'}
                                </span>
                                <span class="badge ${hasVideo ? 'bg-success' : 'bg-secondary'}">
                                    <i class="fas fa-video me-1"></i>Video: ${hasVideo ? 'Set' : 'Not set'}
                                </span>
                                <span class="badge ${hasDetailedSpecs ? 'bg-success' : 'bg-secondary'}">
                                    <i class="fas fa-clipboard-list me-1"></i>Specs: ${hasDetailedSpecs ? 'Set' : 'Not set'}
                                </span>
                                <br>
                                <span class="badge ${hasCatalog ? 'bg-success' : 'bg-secondary'} mt-2">
                                    <i class="fas fa-book me-1"></i>Catalog: ${hasCatalog ? 'Set' : 'Not set'}
                                </span>
                                <span class="badge ${hasDatasheet ? 'bg-success' : 'bg-secondary'} mt-2">
                                    <i class="fas fa-file-pdf me-1"></i>Datasheet: ${hasDatasheet ? 'Set' : 'Not set'}
                                </span>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <h5>Current Gallery Images</h5>
                            ${hasImages ?
                                product.images.map(img => `<img src="${img}" class="image-preview" alt="${product.name}">`).join('')
                                : '<p class="text-muted">No images uploaded yet</p>'}
                        </div>

                        <div class="col-md-4">
                            <h5>Code to Update This Product</h5>
                            <button class="btn btn-sm btn-primary copy-btn" onclick="copyCode('code-${category}-${index}')">
                                <i class="fas fa-copy me-1"></i>Copy Code
                            </button>
                            <div class="code-container">
                                <pre class="code-block" id="code-${category}-${index}">${generateCodeExample(product)}</pre>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            return card;
        }

        function generateCodeExample(product) {
            return `{
    name: '${product.name}',
    // ... existing fields ...

    // Gallery Images (3-5 recommended)
    images: [
        'static/images/products/${product.name.toLowerCase()}-1.jpg',
        'static/images/products/${product.name.toLowerCase()}-2.jpg',
        'static/images/products/${product.name.toLowerCase()}-3.jpg'
    ],

    // YouTube video embed URL
    video: 'https://www.youtube.com/embed/YOUR_VIDEO_ID',

    // Detailed specifications (optional)
    detailedSpecs: {
        'Input': {
            'Parameter': 'Value',
        },
        'Output': {
            'Parameter': 'Value',
        }
    },

    // Download links
    catalog: '/downloads/${product.name}-Catalog.pdf',
    datasheet: '/downloads/${product.name}-Datasheet.pdf'
}`;
        }

        function copyCode(elementId) {
            const codeElement = document.getElementById(elementId);
            const text = codeElement.textContent;

            navigator.clipboard.writeText(text).then(() => {
                // Show success message
                const btn = event.target.closest('button');
                const originalHTML = btn.innerHTML;
                btn.innerHTML = '<i class="fas fa-check me-1"></i>Copied!';
                btn.classList.remove('btn-primary');
                btn.classList.add('btn-success');

                setTimeout(() => {
                    btn.innerHTML = originalHTML;
                    btn.classList.remove('btn-success');
                    btn.classList.add('btn-primary');
                }, 2000);
            });
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', generateProductList);
    </script>
</body>
</html>
